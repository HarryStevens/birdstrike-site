<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<!--SCRIPTS-->
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js"></script>
		<script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="scripts.js"></script>

		<!--STYLES-->
		<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="styles.css">

		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Birds and Planes - Draft</title>
	</head>
	<body>
		<!--Header-->
		<div id="header" class="navbar navbar-default navbar-fixed-top">
			<div class="navbar-header">
				<button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".navbar-collapse">
					<i class="icon-reorder"></i>
				</button>
				<a class="navbar-brand" href="#">BIRDZ</a>
			</div>
			<nav class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li>
						<a href="#"></a>
					</li>
				</ul>

				<!--Right header-->
				<ul class="nav navbar-nav pull-right">
					<li class="navbar-right-item">
						<a href="#" class="dropdown-toggle"><span class="glyphicon glyphicon-search"></span></a>
					</li>
					<li class="navbar-right-item dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-th-list"></span><b class="caret"></b></a>
						<ul class="dropdown-menu pull-right">
							<li>
								<a href="#">Login</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">Register</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">Daily Brief Signup</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="#">About Birdz</a>
							</li>
						</ul>
					</li>
				</ul>
				<div id="reading">
					Now reading
					<div class="top-news">
						TOP NEWS
					</div>
				</div>
			</nav>
		</div>

		<!--Body-->
		<div id="wrapper">

			<!--Side bar-->
			<div id="sidebar-wrapper" class="col-md-2">
				<div id="sidebar">
					<ul class="nav list-group">
						<li>
							<a class="list-group-item" href="index.html"><i class="icon-home icon-1x"></i>It's a bird, it's a plane, it's... a problem</a>
						</li>
						<li>
							<a class="list-group-item" href="#story2"><i class="icon-home icon-1x"></i>The hapless birds</a>
						</li>
						<li>
							<a class="list-group-item" href="#story3"><i class="icon-home icon-1x"></i>Some headline about birds</a>
						</li>
						<li>
							<a class="list-group-item" href="#story4"><i class="icon-home icon-1x"></i>What are the odds your plane will hit a bird?</a>
						</li>
					</ul>
				</div>
			</div>

			<!--Content-->
			<div id="main-wrapper" class="col-md-10">
				<div id="main">

					<!--Story 1-->
					<div class="post-title">
						It's a bird, it's a plane, it's... a problem
					</div>
					<div class="byline">
						By <a href="https://twitter.com/benny_riva">Benedetta Riva</a>, <a href="https://twitter.com/AnnieWaldman">Annie Waldman</a>, <a href="https://twitter.com/winnnni">Winni Zhou</a> and <a href="https://twitter.com/harry_stevens">Harry Stevens</a>
					</div>
					<div class="feature-image">
						<img src="images/story1_header.jpg" />
						<div class="black-band">
							A plane hits a bird nearly once per day at Port Authority airports. <span class="image-credit">Flickr/<a href="https://www.flickr.com/photos/taylar/7016874581/" target="_blank">ingridtaylar</a></span>
						</div>

					</div>
					<div class="text">
						<script>
							function dataLoaded(BIRDSTRIKES) {

								//Create a loop that is a short cut straight to what we want to chart. First
								//start by creating a variable. We want to work with results (and from that, we want to plot count.)
								var myBirdstrikesData = BIRDSTRIKES.results;

								//Create an empty data array myDataArray in which to push all of my new data when I make an array of an array.
								var myBirdstrikesArray = [];

								//Add the headers of the dataArray so that I know what I am working with. In the case of Birdstrikes, I am working with
								//Data and Number of Birdstrikes
								var headerBirdstrikesArray = ["Date", "John F. Kennedy", "Teterboro", "LaGuardia", "Newark Liberty", "Atlantic City", "Stewart"];

								//Push the headers to myDataArray. So now the first "row" so to speak will be the headers Date and Number of Birdstrikes
								myBirdstrikesArray.push(headerBirdstrikesArray);

								//Now I create a loop that is an ARRAY of an ARRAY so that the google visualization will be able to read my data.
								//I have to specify the starting point, or the parameters of the for loop as well as the length of the loop and the
								//number of times to iterate. Then I create an object to work with in the loop and set my MENTIONS.results iterated
								//through this loop to the new variable currObj. Then I have to go into the attributes of each result of my json, and
								//pull out the date and the count of mentions. And then I push that to the empty (all but the headers) array I have
								//above. This will iterate until there are no more results in my json to go through and then it will stop.
								for (var i = 0; i < myBirdstrikesData.length; i++) {

									//You want to get whats in the observations based on its INDEX. Created reference to current object in list.
									var currObj = myBirdstrikesData[i];

									//Formatting date with moment js
									var currDate = currObj.date;
									var momentDate = moment(currDate);
									var newDate = momentDate._d;

									//Now create an array IN an array by taking each value from month and count and pushing to the array shell
									var currArray = [newDate, currObj.JFK_freq, currObj.Teterboro_freq, currObj.LGA_freq, currObj.Newark_freq, currObj.KACY_freq, currObj.Stewart_freq];

									//Pushing to the array shell above so that you're making into the larger array.
									myBirdstrikesArray.push(currArray);
								}

								//Now I feed data to visualization library. Whoot almost there!
								var data = google.visualization.arrayToDataTable(myBirdstrikesArray);

								var formatDate = new google.visualization.DateFormat({
									pattern : 'y'
								});
								formatDate.format(data, 0);

								//Create options object to add fanciness to the chart, like a title.
								var chartOptions = {
									title : "Select a date range to zoom in. Right click to zoom out.",
									vAxis : {
										ticks : [50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650],
										title : 'Birdstrikes',
										gridlines : {
											color : '#fff'
										}
									},
									hAxis : {
										ticks : [new Date(1990, 1, 1), new Date(1992, 1, 1), new Date(1994, 1, 1), new Date(1996, 1, 1), new Date(1998, 1, 1), new Date(2000, 1, 1), new Date(2002, 1, 1), new Date(2004, 1, 1), new Date(2006, 1, 1), new Date(2008, 1, 1), new Date(2010, 1, 1), new Date(2012, 1, 1)],
										title : 'Year',
										slantedText : true,
										format : 'y',
										gridlines : {
											color : '#fff'
										}
									},
									explorer : {
										actions : ['dragToZoom', 'rightClickToReset'],
										axis : 'horizontal'
									},
									colors : ['#794379', 'orange', '#5883b8', 'green', '#ff43f3', 'red'],
								};

								//Now I tell it to create a line chart and give it a div that matches the index.html, meaning I should now go back and create
								//that div in my index.
								var myBirdstrikesChart = new google.visualization.LineChart(document.getElementById('ChartDiv1'));
								//Telling it to draw it using my data and using my options! Finished! So exciting!
								myBirdstrikesChart.draw(data, chartOptions);

							}

							function dataLoaded2(BIRDAIRPORT) {

								//Create a loop that is a short cut straight to what we want to chart. First
								//start by creating a variable. We want to work with results (and from that, we want to plot count.)
								var myBirdAirportData = BIRDAIRPORT.results;

								//Create an empty data array myDataArray in which to push all of my new data when I make an array of an array.
								var myBirdAirportArray = [];

								//Add the headers of the dataArray so that I know what I am working with. In the case of Birdstrikes, I am working with
								//Data and Number of Birdstrikes
								var headerBirdAirportArray = ["Year", "Birdstrike rate"];

								//Push the headers to myDataArray. So now the first "row" so to speak will be the headers Date and Number of Birdstrikes
								myBirdAirportArray.push(headerBirdAirportArray);

								//Now I create a loop that is an ARRAY of an ARRAY so that the google visualization will be able to read my data.
								//I have to specify the starting point, or the parameters of the for loop as well as the length of the loop and the
								//number of times to iterate. Then I create an object to work with in the loop and set my MENTIONS.results iterated
								//through this loop to the new variable currObj. Then I have to go into the attributes of each result of my json, and
								//pull out the date and the count of mentions. And then I push that to the empty (all but the headers) array I have
								//above. This will iterate until there are no more results in my json to go through and then it will stop.
								for (var i = 0; i < myBirdAirportData.length; i++) {

									//You want to get whats in the observations based on its INDEX. Created reference to current object in list.
									var currObj = myBirdAirportData[i];

									//Moment js will format the dates
									var momentYear = moment(currObj.Year);
									var currYear = momentYear._d;

									//Now create an array IN an array by taking each value from month and count and pushing to the array shell
									var currArray = [currYear, currObj.Birdstrikes_Flights];

									//Pushing to the array shell above so that you're making into the larger array.
									myBirdAirportArray.push(currArray);
								}

								//Now I feed data to visualization library. Whoot almost there!
								var data2 = google.visualization.arrayToDataTable(myBirdAirportArray);

								//Formats the way data is displayed on the chart
								var formatDate = new google.visualization.DateFormat({
									pattern : 'y'
								});
								formatDate.format(data2, 0);
								var formatVal = new google.visualization.NumberFormat({
									pattern : '##.##'
								});
								formatVal.format(data2, 1);

								//Create options object to add fanciness to the chart, like a title.
								var chartOptions2 = {
									title : "Select a date range to zoom in. Right click to zoom out.",
									hAxis : {
										ticks : [new Date(1990, 1, 1), new Date(1992, 1, 1), new Date(1994, 1, 1), new Date(1996, 1, 1), new Date(1998, 1, 1), new Date(2000, 1, 1), new Date(2002, 1, 1), new Date(2004, 1, 1), new Date(2006, 1, 1), new Date(2008, 1, 1), new Date(2010, 1, 1), new Date(2012, 1, 1)],
										slantedText : true,
										format : 'y',
										title : 'Year',
										gridlines : {
											color : '#fff'
										},
									},
									vAxis : {
										title : 'Birdstrikes per 100k movements',
										gridlines : {
											color : '#fff'
										},
									},
									explorer : {
										actions : ['dragToZoom', 'rightClickToReset'],
										axis : 'horizontal'
									},
									colors : ['#ff43f3'],
									legend : {
										position : 'none'
									}
								};

								//Now I tell it to create a line chart and give it a div that matches the index.html, meaning I should now go back and create
								//that div in my index.
								var myBirdstrikesAirportChart2 = new google.visualization.LineChart(document.getElementById("ChartDiv2"));

								//Telling it to draw it using my data and using my options! Finished! So exciting!
								myBirdstrikesAirportChart2.draw(data2, chartOptions2);

							}

							//Adding the googleLoaded function. This function will go and get my data and eventually display it on the page! :-)
							function googleLoaded() {
								//Time to load data with get function. This will tell my page to go and get this data set and use the function
								//dataLoaded to render it.
								$.getJSON("data/merge_strikes_freq.json", dataLoaded);

							}

							function googleLoaded2() {
								//Time to load data with get function. This will tell my page to go and get this data set and use the function
								//dataLoaded to render it.
								$.getJSON("data/birdstrikes_flights_PA.json", dataLoaded2);

							}

							//Adding my new function pageLoaded and console logging to make sure that the pageLoaded function activates on
							//document ready. This will eventually load my google visualization.
							function pageLoaded() {
								//Load the google visualization library with the callback googleLoaded. This will tell the browser to load the function
								//googleLoaded. This is using the google visualization script to work. But now I have to make sure that I have
								//my function googleLoaded working.
								google.load("visualization", "1", {
									packages : ["corechart"],
									callback : "googleLoaded"
								});
								google.load("visualization", "1", {
									packages : ["corechart"],
									callback : "googleLoaded2"
								});
							}

							//Adding my document ready to activate my pageLoaded function (which will activate the visualization).
							pageLoaded();
						</script>

						<p>
							Shortly after taking off from Westchester County Airport this March, a JetBlue airplane was forced to make an emergency landing after it barrelled into a flock of seagulls. The plane landed safely at John F. Kennedy International, and its passengers, though rattled, were able to catch a later flight to Miami.
						<p>
							<a href="http://www.nydailynews.com/new-york/e-plane-emergency-landing-jfk-article-1.1737787">News of the emergency landing</a> sparked memories of 2009's “Miracle on the Hudson," when a U.S. Airways pilot was forced to <a href="http://www.usatoday.com/story/todayinthesky/2014/01/15/five-years-ago-today-miracle-on-the-hudson-landing/4489875/">crash land his plane into the New York river</a> after a flock of Canadian geese flew into the plane's engines, fatally disabling the plane’s ability to fly.
						</p>
						<p>
							Media coverage may make such bird strikes seem rare, but similar occurrences are common. When you’re sitting on the plane waiting for take-off, bird strikes may not be your first concern, but airports across the U.S. are investing millions each year into “wildlife management programs” to prevent another miracle on the Hudson.
						</p>
						<p>
							The Federal Aviation Administration and U.S. Department of Agriculture are taking measures to ensure the safety of passengers. The FAA has invested in <a href="http://www.faa.gov/airports/resources/advisory_circulars/index.cfm/go/document.information/documentNumber/150_5220-25">avian radar systems</a> to detect and track birds around airports. Additionally, the USDA employs “wildlife biologists” to find more efficient ways to manage airport environments, even if that means killing birds and small mammals. Despite these precautions, the frequency of bird strikes has risen in recent years.
						</p>
						<p>At the six airports owned by the Port Authority of New York and New Jersey &ndash; John F. Kennedy, LaGuardia, Newark Liberty, Teterboro, Atlantic City and Stewart &ndash; bird strikes have increased since 1990. Even taking into account the increase in the number of flights, the birdstrike rate has jumped notably.
						<div class="chart-title">
							Birdstrikes per 100,000 Air Movements* at All Port Authority Airports, 1990-2013
						</div>
						<div id="ChartDiv2" class="viz"></div>
						<p class="chart-note">*Air movements include both takeoffs and landings.</p>
						<p>
							Michael Begier, national coordinator of the airport wildlife hazards program at the USDA, said that although the number of damage-causing bird strikes has decreased during the past two decades, the number of reported bird strikes has gone up. According to FAA data, the number of strikes reported annually in New York City increased 337% between 1990 and 2013 (this figure takes into account the growth in air traffic between these years).
						</p>
						<p>
							According to the FAA, bird strikes are increasing for three key reasons. The populations of many large bird species have burgeoned as a result of adaptation to urban areas as well as airports. Alongside the expanding bird population, plane flights have increased in frequency as well from 310 million flights in 1980 to 725 million in 2012.
						</p>
						<p>
							Curiously, advancements in plane technology have also contributed to high bird strike rates. More recently constructed planes have two engines, instead of three or four like in the past.  This means that, “in the event of a multiple ingestion event, aircraft with two engines may have vulnerabilities not shared by their three or four engine-equipped counterparts,” claims a recent FAA report. Furthermore,“research has indicated that birds are less able to detect and avoid modern jet aircraft with quieter turbofan engines than older aircraft with noisier engines.”
						</p>
						<p>
							In New York City’s metropolitan area, bird strikes occur nearly once a day (0.9 times) on average. Across the nation’s 19,000 airports, avian strikes happen nearly 30 times a day on average. With New York’s three primary airports located near large wildlife reserves and wetlands, planes are at a high risk of migratory birds, such as those that struck US Airways Flight 1549.
						</p>
						<div class="chart-title">
							Yearly Birdstrikes at Port Authority Airports, 1990-2013
						</div>
						<div id="ChartDiv1" class="viz"></div>
						<p>
							Birdstrikes have increased at all Port Authority airports, but John F. Kennedy's wide lead is striking. One factor that contributes to JFK's high rate is its higher volume of air traffic, but flights at JFK are perhaps further prone to birdstrikes because the airport's runways are directly in front of the <a href="http://www.nyharborparks.org/visit/jaba.html">Jamaica Bay Wildlife Refuge</a>, an internationally-recognized Important Bird Area. Water fowl like gulls and geese nest in the marshlands that surround the airport, and predatory species like kestrels hunt prey over JFK's open fields.
						</p>
						</p>
						<p>
							JFK's placement next to such a vibrant avian habitat “is obviously a fundamental conflict,” Tod Winston, communications manager for the New York City Audubon Society, said in an email.
						</p>
						<p>
							Although the number of bird strikes is small compared with the daily number of flights in the New York City region, the hidden costs of strikes are underestimated. According to the Federal Aviation Administration (FAA), wildlife strikes delay planes for about 600,000 hours annually. Additionally, the cost of delays and plane damage amounts to nearly $1 billion per year, though less than 10 percent of planes sustain damage.
						</p>
					</div><!--End text-->
					<!--End story 1-->

					<!--Story 2-->
					<a name="story2"></a>
					<div class="story-space">
						&nbsp;
					</div>
					<div class="post-title">
						The hapless birds
					</div>
					<div class="byline">
						By <a href="https://twitter.com/benny_riva">Benedetta Riva</a>, <a href="https://twitter.com/AnnieWaldman">Annie Waldman</a>, <a href="https://twitter.com/winnnni">Winni Zhou</a> and <a href="https://twitter.com/harry_stevens">Harry Stevens</a>
					</div>
					<div class="feature-image">
						<img src="images/story2_header.jpg" />
						<div class="black-band">
							Some birds are at much greater risk than others. <span class="image-credit">Flickr/<a href="https://www.flickr.com/photos/69214385@N04/9274411015/" target="_blank">Don McCullough</a></span>
						</div>

					</div>
					<div class="text">
						<p>
							Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
						</p>
						<p>
							Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
						</p>
					</div><!--End text-->

				</div><!--End id main-->

			</div><!--End id main-wrapper-->

		</div><!--End id wrapper-->
	</body>
</html>

